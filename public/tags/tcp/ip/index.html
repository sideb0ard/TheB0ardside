<!DOCTYPE html>
<html class="no-js" lang="en-US" prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#">
<head>
    <meta charset="utf-8">

    <base href="http://theb0ardside.com">
    <title> TheB0ardside.com </title>
    <link rel="canonical" href="http://theb0ardside.com/tags/tcp/ip/">
    <link href="/static/css/b0ardstrap.min.css" rel="stylesheet"/>
    <link href="/static/css/b0ardstyle.css" rel="stylesheet"/>

    <link rel="alternate" type="application/rss+xml" title="RSS" href="http://theb0ardside.com/index.xml" />

</head>
<body lang="en">
<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  
  <div class="navbar-blah">
  <div class="navbar-header">
    <a class="navbar-brand" href="/">The B0ardside_</a>
  </div>

  <div>
    <ul class="nav navbar-nav navbar-right">
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">hello<b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><img src="/static/img/thor.jpg"></li>
            <li><a href="/categories/blog/">All Articles</a></li>
            <li><a target="new" href="mailto:thorsten@theb0ardside.com?subject=hullo">Email</a></li>
            <li><a target="new" href="http://github.com/sideb0ard">Code</a></li>
            <li><a target="new" href="http://drawingb0ard.blogspot.com/">Drawings</a></li>
            <li><a target="new" href="http://bff.fm/shows/highpoint-lowlife">Radio Show</a></li>
            <li><a target="new" href="https://sideb0ard.bandcamp.com/">Music</a></li>
            <li><a target="new" href="http://twitter.com/sideb0ard">Twitter</a></li>
            <li><a target="new" href="http://theb0ardside.com/index.xml">Rss Feed</a></li>
        </ul>
      </li>
    </ul>
  </div>
</div>
</nav>

  <div class="container">
  <div id="page">


<section id="main">
  <div>
   <h1 id="title">Tcp/Ip</h1>
    
        <article class="post">
    <header>
      <h2><a href='http://theb0ardside.com/vent-cerf-greyglers/'> Greyglers!</a> </h2>
      <div class="post-meta">Sat, Oct 18, 2014</div>
    </header>
    <p>Vint Cerf,the Don..</p>

<div class="video-container">
<iframe width="560" height="315" src="//www.youtube.com/embed/t9M0RPNr9qg" frameborder="0" allowfullscreen></iframe>
</div>

</article>

    
        <article class="post">
    <header>
      <h2><a href='http://theb0ardside.com/perlparpparp/'> perl parp parp</a> </h2>
      <div class="post-meta">Sun, Sep 2, 2012</div>
    </header>
    <p>I updated the IP address for both my Name Servers tonite, and was monitoring to see how quickly the new addresses were propagating.  First stop was the exceptionally useful <a href="http://www.whatsmydns.net/ " title="What&#039;s My DNS?" target="_blank">Whats My DNS</a></p><p>At the host level I also wanted to track the incoming DNS queries using tcpdump. I could see them streaming into the new host, and visually you could see an obvious difference when viewing the output of the same command on the old host. I googled around for a timer utility which run a command for a given time, so i could quantify the difference. Perfect answer was <a href="http://stackoverflow.com/questions/601543/command-line-command-to-auto-kill-a-command-after-a-certain-amount-of-time" title="Stack Overflow" target="_blank">here</a>, a simple perl wrapper function.</p><p>Here's how to use it to run tcpdump command for sixty seconds, and count the packets seen:</p><p><small><code># doalarm () { perl -e &#039;alarm shift; exec @ARGV&#039; "$@"; }<br /># doalarm 60 tcpdump -u  -i eth0 port 53  -n  |wc -l<br />tcpdump: verbose output suppressed, use -v or -vv for full protocol decode<br />listening on eth0, link-type EN10MB (Ethernet), capture size 65535 bytes<br />19504</code></small></p>

</article>

    
        <article class="post">
    <header>
      <h2><a href='http://theb0ardside.com/webkitandchromeinternals/'> webkit and chrome internals</a> </h2>
      <div class="post-meta">Wed, Jul 25, 2012</div>
    </header>
    <p>I went along to the SF Web Performance Meetup last night, for a talk by <a href="http://www.igvita.com/" target="_blank">Ilya Grigorik</a> which was one of the best and most informative Meetups I've been along to - lots of meaty details on how Webkit in general works, and specifically how Chrome uses it across the many platforms it runs on. </p><p>The video has just been posted here - </p><p><object width="480" height="296" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"><param name="flashvars" value="vid=24227835&amp;autoplay=false"/><param name="allowfullscreen" value="true"/><param name="allowscriptaccess" value="always"/><param name="src" value="http://www.ustream.tv/flash/viewer.swf"/><embed flashvars="vid=24227835&amp;autoplay=false" width="480" height="296" allowfullscreen="true" allowscriptaccess="always" src="http://www.ustream.tv/flash/viewer.swf" type="application/x-shockwave-flash"></embed></object><br /><br /><a href="http://www.ustream.tv/" style="padding: 2px 0px 4px; width: 400px; background: #ffffff; display: block; color: #000000; font-weight: normal; font-size: 10px; text-decoration: underline; text-align: center;" target="_blank">Video streaming by Ustream</a></p><p>Ilya starts speaking around the 12 minute mark..</p>

</article>

    
        <article class="post">
    <header>
      <h2><a href='http://theb0ardside.com/tcpdumppatterns/'> tcpdump patterns</a> </h2>
      <div class="post-meta">Fri, Jun 29, 2012</div>
    </header>
    <p><img src="http://farm8.staticflickr.com/7185/6844034348_50dd1c5f32_b.jpg" alt="McCarthy" /></p><p>I use tcpdump a lot, but mostly at a reasonably high level, only really restricting the capture to host and port info, then pulling the dump back into Wireshark for nicer visualisation and easier filtering.</p><p>A couple of months back I read <a href="http://www.amazon.com/Moonwalking-Einstein-Science-Remembering-Everything/dp/159420229X" title="Moonwalking With Einstein" target="_blank">Moonwalking With Einsten</a>, which is a nice pop-science history of the importance of memory in previous societies, alongside the contemporary phenomena of <a href="http://www.worldmemorychampionships.com/" title="World Memory Competitions" target="_blank">competitive memory competitions</a>. The book is great, and explains how feats of memory are achieved via the technique of <a href="http://en.wikipedia.org/wiki/Method_of_loci" title="Memory Palaces" target="_blank">memory palaces</a>, a technique dating back to Roman times - spatial memory relationships. I've been using the technique a lot since I read this book, and truly, no magic to it, it really works. Basically, when you have a list of items to remember, you weave each item, in order, into a spatially focussed narrative.</p><p>So, last night, I get out my copy of TCP/IP Illustrated, Volume 1*, one of my most-returned-to tech books - I've always wanted to have a more encyclopedic knowledge of the lower level details of TCP/IP, and last night applied the Memory Palace Technique to the structure of a TCP packet.<br/>
(( read the <a href="http://en.wikipedia.org/wiki/Method_of_loci" title="Memory Palace - Wikipedia" target="_blank">wikipedia article</a> for more details)) </p>
<p>In my memory palace I was walking down the path towards the house where I grew up, and seeing a &#8216;<strong>S</strong>o<strong>RC</strong>erer/<strong>Src Port</strong>&#8216; battling with &#8216;Dick <strong>D</strong>a<strong>ST</strong>ardly and Mutley/<strong>Dst Port</strong>&#8216;, then walk into my mothers front hallway with a <strong>Sequence Number</strong> along the front hall, then my Grandfather sitting in a chair in the living room saying &#8220;<strong>ACK</strong>!&#8221; because the soccer is on the television and he's complaining about the <strong>Header Length</strong> &#8230; you get the idea - but yeah, you need to make your own memory palace.</p><p>Now that I have a complete image of this TCP packet in my head suddenly expressions like :</p><p><code>tcpdump -ni en1 tcp[13] == 18 and host 172.16.1.200 and port 80 </code></p><p>are way easier to understand and use - the <code>tcp[13]</code> part refers to the 13th Octet of the packet, which is the Flags octet, then the <code>18</code> part is a simple decimal representation of the binary flags, in the order they are in the diagram above - i.e the Flags are </p><p><code>CWR | ECE | URG | ACK | PSH | RST | SYN | FIN</code> </p><p>so in my example 18 refers to having both the ACK and SYN flags set - 00010010 which if you're used to dealing with netmasks math is quite an easy translation. My example, then, will only capture the first response packet from the server, as it would be the only part of the conversation to have both an ACK and SYN flag set. (I used a separate memory palace for the flags themselves)</p><p>To capture all SYN packets, including the ACK/SYN ones, you would use:</p><p><code>tcpdump -ni en1 &#039;tcp[13] == 18 or tcp[13] == 2&#039; and host 172.16.1.200 and port 80</code>.</p><p>Memory Palaces are pretty damn useful!</p><p>** Most Engineers are aware of TCP/IP Illustrated, however a lot of people I've spoken to aren't aware there was a <a href="http://www.amazon.com/TCP-Illustrated-Volume-Addison-Wesley-Professional/dp/0321336313/ref=pd_sim_b_1" title="TCP/IP Illustrated Vol 1 Edition 2" target="_blank">2nd Edition published in November of 2011, updated by a guy named Kevin R. Fall</a> - I would absolutely recommend it, an amazing book and especially with the updates, just seems an essential addition to any Engineer's library..</p>

</article>

    
  </div>
</section>

      <script src="/static/js/jquery.js"></script>
      <script src="/static/js/bootstrap.min.js"></script>
      <script src="/static/js/mousetrap.min.js"></script>
      <script src="/static/js/b0ardside.js"></script>
      </div>
      </div>
      <div id="footer"></div>
  </body>

</html>

